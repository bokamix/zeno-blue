import{r,o as E,e as n,i,l as e,L as m,u as v,A as o,p as k,B as _,C as w,F,j as L,K as P}from"./vue-core-Chol9MOc.js";import{S,X as B,P as M,T as D,u as N}from"./index-BDdMoWja.js";import"./tiptap-zBojtxx-.js";import"./markdown-B3lvOPUD.js";import"./highlight-BX1zPj8W.js";const T={class:"glass-solid rounded-3xl w-full max-w-lg max-h-[80vh] flex flex-col animate-modal-enter relative overflow-hidden"},U={class:"flex items-center justify-between p-6 border-b border-white/5"},A={class:"flex items-center gap-3"},I={class:"p-2 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20"},H={class:"text-lg font-semibold text-[var(--text-primary)]"},K={class:"flex items-center gap-2"},X={class:"flex-1 overflow-y-auto p-6 custom-scroll"},q={key:0,class:"space-y-4"},G={class:"text-xs text-zinc-500 mb-1 block"},J=["placeholder"],O={class:"text-xs text-zinc-500 mb-1 block"},Q=["placeholder"],R={class:"text-xs text-zinc-500 mb-1 block"},W=["placeholder"],Y={key:0,class:"text-xs text-red-400"},Z={class:"flex items-center gap-2 justify-end"},ee=["disabled"],te={key:1},se={key:0,class:"text-center py-12"},le={class:"text-zinc-400"},oe={key:1,class:"text-center py-12"},ae={class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-amber-500/10 to-orange-500/10 flex items-center justify-center mx-auto mb-4"},ne={class:"text-zinc-400 mb-2"},ie={class:"text-xs text-zinc-500"},re={key:2,class:"space-y-3"},de={class:"flex items-start justify-between"},ce={class:"flex-1 min-w-0"},ue={class:"text-sm font-medium text-[var(--text-primary)] truncate"},me={key:0,class:"text-xs text-zinc-500 mt-0.5 line-clamp-2"},ve={class:"flex items-center gap-1 flex-shrink-0 ml-3"},be=["onClick","title"],pe=["onClick","title"],xe={key:1,class:"flex items-center gap-1"},he=["onClick"],$e={__name:"CustomSkillsModal",emits:["close"],setup(ge,{emit:fe}){const b=N(),h=r([]),g=r(!0),p=r(!1),d=r(null),x=r(null),c=r(!1),u=r(null),a=r({name:"",description:"",instructions:""}),f=async()=>{g.value=!0;try{h.value=await b.getCustomSkills()}catch(t){console.error("Failed to load custom skills",t)}finally{g.value=!1}},$=()=>{u.value=null,a.value={name:"",description:"",instructions:""},d.value=null,c.value=!0},C=t=>{u.value=t.id,a.value={name:t.name,description:t.description||"",instructions:t.instructions||""},d.value=null,c.value=!0},z=()=>{c.value=!1,u.value=null,d.value=null},j=async()=>{if(!(!a.value.name.trim()||!a.value.instructions.trim())){p.value=!0,d.value=null;try{u.value?await b.updateCustomSkill(u.value,a.value):await b.createCustomSkill(a.value),c.value=!1,u.value=null,await f()}catch(t){d.value=t.message}finally{p.value=!1}}},V=async t=>{try{await b.deleteCustomSkill(t),x.value=null,await f()}catch(s){console.error("Failed to delete skill",s)}};return E(()=>{f()}),(t,s)=>(i(),n("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[5]||(s[5]=P(l=>t.$emit("close"),["self"]))},[e("div",T,[s[6]||(s[6]=e("div",{class:"absolute top-0 left-8 right-8 h-px bg-gradient-to-r from-transparent via-amber-500/50 to-transparent"},null,-1)),e("div",U,[e("div",A,[e("div",I,[m(v(S),{class:"w-5 h-5 text-amber-400"})]),e("h2",H,o(t.$t("modals.customSkills.title")),1)]),e("div",K,[c.value?k("",!0):(i(),n("button",{key:0,onClick:$,class:"px-3 py-1.5 text-xs rounded-lg font-medium transition-all bg-amber-500/20 text-amber-400 hover:bg-amber-500/30"},o(t.$t("modals.customSkills.createSkill")),1)),e("button",{onClick:s[0]||(s[0]=l=>t.$emit("close")),class:"p-2 rounded-xl text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-surface)] transition-all"},[m(v(B),{class:"w-5 h-5"})])])]),e("div",X,[c.value?(i(),n("div",q,[e("div",null,[e("label",G,o(t.$t("modals.customSkills.nameLabel")),1),_(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>a.value.name=l),type:"text",placeholder:t.$t("modals.customSkills.namePlaceholder"),class:"w-full px-3 py-2 text-sm rounded-lg bg-[var(--bg-elevated)] text-[var(--text-primary)] border border-[var(--border-subtle)] outline-none focus:border-amber-500/50"},null,8,J),[[w,a.value.name]])]),e("div",null,[e("label",O,o(t.$t("modals.customSkills.descriptionLabel")),1),_(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>a.value.description=l),type:"text",placeholder:t.$t("modals.customSkills.descriptionPlaceholder"),class:"w-full px-3 py-2 text-sm rounded-lg bg-[var(--bg-elevated)] text-[var(--text-primary)] border border-[var(--border-subtle)] outline-none focus:border-amber-500/50"},null,8,Q),[[w,a.value.description]])]),e("div",null,[e("label",R,o(t.$t("modals.customSkills.instructionsLabel")),1),_(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=l=>a.value.instructions=l),placeholder:t.$t("modals.customSkills.instructionsPlaceholder"),rows:"8",class:"w-full px-3 py-2 text-sm rounded-lg bg-[var(--bg-elevated)] text-[var(--text-primary)] border border-[var(--border-subtle)] outline-none focus:border-amber-500/50 resize-y min-h-[120px] max-h-[300px] font-mono"},null,8,W),[[w,a.value.instructions]])]),d.value?(i(),n("p",Y,o(d.value),1)):k("",!0),e("div",Z,[e("button",{onClick:z,class:"px-4 py-2 text-sm rounded-lg font-medium transition-all bg-white/10 text-zinc-300 hover:bg-white/20"},o(t.$t("common.cancel")),1),e("button",{onClick:j,disabled:p.value||!a.value.name.trim()||!a.value.instructions.trim(),class:"px-4 py-2 text-sm rounded-lg font-medium transition-all bg-amber-500/20 text-amber-400 hover:bg-amber-500/30 disabled:opacity-50 disabled:cursor-not-allowed"},o(p.value?t.$t("common.saving"):t.$t("common.save")),9,ee)])])):(i(),n("div",te,[g.value?(i(),n("div",se,[e("p",le,o(t.$t("common.loading")),1)])):h.value.length===0?(i(),n("div",oe,[e("div",ae,[m(v(S),{class:"w-8 h-8 text-amber-400/50"})]),e("p",ne,o(t.$t("modals.customSkills.noSkills")),1),e("p",ie,o(t.$t("modals.customSkills.noSkillsHint")),1)])):(i(),n("div",re,[(i(!0),n(F,null,L(h.value,l=>(i(),n("div",{key:l.id,class:"bg-white/5 border border-white/5 rounded-xl p-4 hover:bg-white/[0.07] transition-colors"},[e("div",de,[e("div",ce,[e("h3",ue,o(l.name),1),l.description?(i(),n("p",me,o(l.description),1)):k("",!0)]),e("div",ve,[e("button",{onClick:y=>C(l),class:"p-1.5 text-zinc-400 hover:text-amber-400 hover:bg-amber-500/20 rounded-lg transition-all",title:t.$t("modals.customSkills.editSkill")},[m(v(M),{class:"w-3.5 h-3.5"})],8,be),x.value!==l.id?(i(),n("button",{key:0,onClick:y=>x.value=l.id,class:"p-1.5 text-zinc-400 hover:text-red-400 hover:bg-red-500/20 rounded-lg transition-all",title:t.$t("common.delete")},[m(v(D),{class:"w-3.5 h-3.5"})],8,pe)):(i(),n("div",xe,[e("button",{onClick:y=>V(l.id),class:"px-2 py-1 text-[10px] rounded-lg font-medium bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-all"},o(t.$t("common.delete")),9,he),e("button",{onClick:s[4]||(s[4]=y=>x.value=null),class:"px-2 py-1 text-[10px] rounded-lg font-medium bg-white/10 text-zinc-300 hover:bg-white/20 transition-all"},o(t.$t("common.cancel")),1)]))])])]))),128))]))]))])])]))}};export{$e as default};
